"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2794],{81806:function(e,n,t){var a=t(1413),i=t(45987),l=(t(72791),t(11135)),o=t(25787),s=t(80184),r=["classes","children"];n.Z=(0,o.Z)((function(e){return(0,l.Z)({root:{padding:0,margin:0,border:0,backgroundColor:"transparent",textDecoration:"underline",cursor:"pointer",fontSize:"inherit",color:e.palette.info.main,fontFamily:"Lato, sans-serif"}})}))((function(e){var n=e.classes,t=e.children,l=(0,i.Z)(e,r);return(0,s.jsx)("button",(0,a.Z)((0,a.Z)({},l),{},{className:n.root,children:t}))}))},56028:function(e,n,t){var a=t(29439),i=t(1413),l=t(72791),o=t(60364),s=t(13400),r=t(55646),c=t(5574),d=t(65661),u=t(39157),m=t(11135),g=t(25787),v=t(23814),h=t(42649),x=t(29823),Z=t(28057),f=t(80184),p=(0,o.$j)((function(e){return{modalSnackMessage:e.system.modalSnackBar}}),{setModalSnackMessage:h.MK});n.Z=(0,g.Z)((function(e){return(0,m.Z)((0,i.Z)((0,i.Z)({},v.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},v.sN))}))(p((function(e){var n=e.onClose,t=e.modalOpen,o=e.title,m=e.children,g=e.classes,v=e.wideLimit,h=void 0===v||v,p=e.modalSnackMessage,b=e.noContentPadding,j=e.setModalSnackMessage,w=e.titleIcon,S=void 0===w?null:w,k=(0,l.useState)(!1),y=(0,a.Z)(k,2),P=y[0],E=y[1];(0,l.useEffect)((function(){j("")}),[j]),(0,l.useEffect)((function(){if(p){if(""===p.message)return void E(!1);"error"!==p.type&&E(!0)}}),[p]);var R=h?{classes:{paper:g.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},C="";return p&&(C=p.detailedErrorMsg,(""===p.detailedErrorMsg||p.detailedErrorMsg.length<5)&&(C=p.message)),(0,f.jsxs)(c.Z,(0,i.Z)((0,i.Z)({open:t,classes:g},R),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:g.root,children:[(0,f.jsxs)(d.Z,{className:g.title,children:[(0,f.jsxs)("div",{className:g.titleText,children:[S," ",o]}),(0,f.jsx)("div",{className:g.closeContainer,children:(0,f.jsx)(s.Z,{"aria-label":"close",id:"close",className:g.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,f.jsx)(x.Z,{})})})]}),(0,f.jsx)(Z.Z,{isModal:!0}),(0,f.jsx)(r.Z,{open:P,className:g.snackBarModal,onClose:function(){E(!1),j("")},message:C,ContentProps:{className:"".concat(g.snackBar," ").concat(p&&"error"===p.type?g.errorSnackBar:"")},autoHideDuration:p&&"error"===p.type?1e4:5e3}),(0,f.jsx)(u.Z,{className:b?"":g.content,children:m})]}))})))},45902:function(e,n,t){var a=t(1413),i=(t(72791),t(53767)),l=t(80184);n.Z=function(e){var n=e.label,t=void 0===n?null:n,o=e.value,s=void 0===o?"-":o,r=e.orientation,c=void 0===r?"column":r,d=e.stkProps,u=void 0===d?{}:d,m=e.lblProps,g=void 0===m?{}:m,v=e.valProps,h=void 0===v?{}:v;return(0,l.jsxs)(i.Z,(0,a.Z)((0,a.Z)({direction:{xs:"column",sm:c}},u),{},{children:[(0,l.jsx)("label",(0,a.Z)((0,a.Z)({style:{marginRight:5,fontWeight:600}},g),{},{children:t})),(0,l.jsx)("label",(0,a.Z)((0,a.Z)({style:{marginRight:5,fontWeight:500}},h),{},{children:s}))]}))}},22794:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var a=t(29439),i=t(1413),l=t(72791),o=t(60364),s=t(26181),r=t.n(s),c=t(11135),d=t(25787),u=t(23814),m=t(61889),g=t(64554),v=t(36151),h=t(42649),x=t(56028),Z=t(21435),f=t(37516),p=t(81207),b=t(80184),j=(0,o.$j)(null,{setModalErrorSnackMessage:h.zb}),w=(0,d.Z)((function(e){return(0,c.Z)((0,i.Z)((0,i.Z)({buttonContainer:{textAlign:"right"},infoText:{fontSize:14}},u.DF),u.ID))}))(j((function(e){var n=e.open,t=e.closeModalAndRefresh,o=e.namespace,s=e.idTenant,r=e.setModalErrorSnackMessage,c=e.classes,d=(0,l.useState)(!1),u=(0,a.Z)(d,2),g=u[0],h=u[1],j=(0,l.useState)(""),w=(0,a.Z)(j,2),S=w[0],k=w[1],y=(0,l.useState)(!1),P=(0,a.Z)(y,2),E=P[0],R=P[1],C=(0,l.useState)(""),I=(0,a.Z)(C,2),M=I[0],N=I[1],D=(0,l.useState)(""),T=(0,a.Z)(D,2),B=T[0],F=T[1],_=(0,l.useState)(""),L=(0,a.Z)(_,2),O=L[0],A=L[1],W=(0,l.useState)(!0),z=(0,a.Z)(W,2),$=z[0],U=z[1],V=(0,l.useCallback)((function(e){var n=new RegExp("^$|^((.*?)/(.*?):(.+))$");if("minioImage"===e)U(n.test(S))}),[S]);(0,l.useEffect)((function(){V("minioImage")}),[S,V]);return(0,b.jsx)(x.Z,{title:"Update MinIO Version",modalOpen:n,onClose:function(){t(!1)},children:(0,b.jsxs)(m.ZP,{container:!0,children:[(0,b.jsxs)(m.ZP,{item:!0,xs:12,className:c.modalFormScrollable,children:[(0,b.jsx)("div",{className:c.infoText,children:"Please enter the MinIO image from dockerhub to use. If blank, then latest build will be used."}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsx)(m.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,b.jsx)(Z.Z,{value:S,label:"MinIO's Image",id:"minioImage",name:"minioImage",placeholder:"E.g. minio/minio:RELEASE.2022-02-26T02-54-46Z",onChange:function(e){k(e.target.value)}})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,b.jsx)(f.Z,{value:"imageRegistry",id:"setImageRegistry",name:"setImageRegistry",checked:E,onChange:function(e){R(!E)},label:"Set Custom Image Registry",indicatorLabels:["Yes","No"]})}),E&&(0,b.jsxs)(l.Fragment,{children:[(0,b.jsx)(m.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,b.jsx)(Z.Z,{value:M,label:"Endpoint",id:"imageRegistry",name:"imageRegistry",placeholder:"E.g. https://index.docker.io/v1/",onChange:function(e){N(e.target.value)}})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,b.jsx)(Z.Z,{value:B,label:"Username",id:"imageRegistryUsername",name:"imageRegistryUsername",placeholder:"Enter image registry username",onChange:function(e){F(e.target.value)}})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,b.jsx)(Z.Z,{value:O,label:"Password",id:"imageRegistryPassword",name:"imageRegistryPassword",placeholder:"Enter image registry password",onChange:function(e){A(e.target.value)}})})]})]}),(0,b.jsxs)(m.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:[(0,b.jsx)(v.Z,{type:"button",color:"primary",variant:"outlined",onClick:function(){k(""),R(!1),N(""),F(""),A("")},children:"Clear"}),(0,b.jsx)(v.Z,{type:"submit",variant:"contained",color:"primary",disabled:!$||E&&(""===M.trim()||""===B.trim()||""===O.trim())||g,onClick:function(){h(!0);var e={image:S,enable_prometheus:!0};if(E){var n={image_registry:{registry:M,username:B,password:O}};e=(0,i.Z)((0,i.Z)({},e),n)}p.Z.invoke("PUT","/api/v1/namespaces/".concat(o,"/tenants/").concat(s),e).then((function(){h(!1),t(!0)})).catch((function(e){r(e),h(!1)}))},children:"Save"})]})]})})}))),S=t(81806),k=t(40986),y=t(53767),P=t(22512),E=t(93656),R=t(45902),C=t(45248),I=t(72401),M=(0,d.Z)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#F4F4F4"},bar:{borderRadius:5,backgroundColor:"#081C42"},padChart:{padding:"5px"}}}))(k.Z),N=(0,d.Z)((function(e){return(0,c.Z)({allValue:{fontSize:16,fontWeight:700,marginBottom:8},currentUsage:{fontSize:12,marginTop:8},centerItem:{textAlign:"center"}})}))((function(e){var n=e.classes,t=e.maxValue,a=e.currValue,i=e.healthStatus,o=e.loading,s=e.error,r={value:"n/a",unit:""},c={value:"n/a",unit:""};if(t){var d=(0,C.ae)("".concat(t),!0).split(" ");r.value=d[0],r.unit=d[1]}if(a){var u=(0,C.ae)("".concat(a),!0).split(" ");c.value=u[0],c.unit=u[1]}var g=0;a&&t&&(g=100*a/t);return(0,b.jsxs)(l.Fragment,{children:[o&&(0,b.jsx)("div",{className:n.padChart,children:(0,b.jsx)(m.ZP,{item:!0,xs:12,className:n.centerItem,children:(0,b.jsx)(I.Z,{style:{width:40,height:40}})})}),o?null:""!==s?(0,b.jsx)(P.Z,{errorMessage:s,withBreak:!1}):(0,b.jsxs)(m.ZP,{item:!0,xs:12,children:[(0,b.jsx)(M,{variant:"determinate",value:g}),(0,b.jsxs)(y.Z,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:4},alignItems:"stretch",margin:"15px 0 15px 0",children:[(0,b.jsx)(R.Z,{label:"Storage Capacity:",orientation:"row",value:"".concat(r.value," ").concat(r.unit)}),(0,b.jsx)(R.Z,{label:"Used:",orientation:"row",value:"".concat(c.value," ").concat(c.unit)}),i&&(0,b.jsx)(R.Z,{orientation:"row",label:"Health:",value:(0,b.jsx)("span",{className:i,children:(0,b.jsx)(E.J$,{})})})]})]})]})})),D=t(50896),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red",n=arguments.length>1?arguments[1]:void 0;return"red"===e?n.redState:"yellow"===e?n.yellowState:"green"===e?n.greenState:n.greyState},B=function(e){var n,t,a,i,l,o=e.tenant,s=e.classes;return(0,b.jsx)(N,{currValue:null===o||void 0===o||null===(n=o.status)||void 0===n||null===(t=n.usage)||void 0===t?void 0:t.raw_usage,maxValue:null===o||void 0===o||null===(a=o.status)||void 0===a||null===(i=a.usage)||void 0===i?void 0:i.raw,label:"Storage",error:"",loading:!1,healthStatus:T(null===o||void 0===o||null===(l=o.status)||void 0===l?void 0:l.health_status,s)})},F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,b.jsx)(f.Z,{indicatorLabels:["Enabled","Disabled"],checked:e,value:e,id:"".concat(n,"-status"),name:"".concat(n,"-status"),onChange:function(){},switchOnly:!0})},_={display:"flex",justifyContent:"space-between",marginTop:"10px","@media (max-width: 600px)":{flexFlow:"column"}},L={stkProps:{sx:{flex:1,marginRight:10,display:"flex",alignItems:"center",justifyContent:"space-between","@media (max-width: 900px)":{marginRight:"25px"}}},lblProps:{style:{minWidth:100}}},O=(0,o.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo,logEnabled:r()(e.tenants.tenantDetails.tenantInfo,"logEnabled",!1),monitoringEnabled:r()(e.tenants.tenantDetails.tenantInfo,"monitoringEnabled",!1),encryptionEnabled:r()(e.tenants.tenantDetails.tenantInfo,"encryptionEnabled",!1),minioTLS:r()(e.tenants.tenantDetails.tenantInfo,"minioTLS",!1),consoleTLS:r()(e.tenants.tenantDetails.tenantInfo,"consoleTLS",!1),consoleEnabled:r()(e.tenants.tenantDetails.tenantInfo,"consoleEnabled",!1),adEnabled:r()(e.tenants.tenantDetails.tenantInfo,"idpAdEnabled",!1),oidcEnabled:r()(e.tenants.tenantDetails.tenantInfo,"idpOidcEnabled",!1)}}),null),A=(0,d.Z)((function(e){return(0,c.Z)((0,i.Z)((0,i.Z)({},u.oZ),{},{redState:{color:e.palette.error.main,"& .min-icon":{width:16,height:16,marginRight:4}},yellowState:{color:e.palette.warning.main,"& .min-icon":{width:16,height:16,marginRight:4}},greenState:{color:e.palette.success.main,"& .min-icon":{width:16,height:16,marginRight:4}},greyState:{color:"grey","& .min-icon":{width:16,height:16,marginRight:4}},centerAlign:{textAlign:"center"},detailSection:{"& div":{"& b,i":{minWidth:80,display:"block",float:"left"},"& i":{fontStyle:"normal",wordWrap:"break-word",overflowWrap:"break-word"},"& div":{clear:"both"},clear:"both",marginBottom:2}},linkedSection:{color:e.palette.info.main}},(0,u.Bz)(e.spacing(4))))}))(O((function(e){var n,t,o,s,r,c,d,u,v,h,x=e.classes,Z=e.match,f=e.tenant,p=e.logEnabled,j=e.monitoringEnabled,k=e.encryptionEnabled,y=e.minioTLS,P=(e.consoleTLS,e.consoleEnabled,e.adEnabled),E=e.oidcEnabled,C=(e.loadingTenant,(0,l.useState)(0)),I=(0,a.Z)(C,2),M=I[0],N=I[1],T=(0,l.useState)(0),O=(0,a.Z)(T,2),A=O[0],W=O[1],z=(0,l.useState)(0),$=(0,a.Z)(z,2),U=$[0],V=$[1],q=(0,l.useState)(!1),H=(0,a.Z)(q,2),Q=H[0],J=H[1],K=Z.params.tenantName,Y=Z.params.tenantNamespace;return(0,l.useEffect)((function(){f&&(N(f.pools.length),V(f.total_volumes||0),W(f.total_instances||0))}),[f]),(0,b.jsxs)(l.Fragment,{children:[Q&&(0,b.jsx)(w,{open:Q,closeModalAndRefresh:function(){J(!1)},idTenant:K,namespace:Y}),(0,b.jsx)(D.Z,{separator:!1,children:"Details"}),(0,b.jsx)(B,{tenant:f,classes:x}),(0,b.jsxs)(m.ZP,{container:!0,children:[(0,b.jsxs)(m.ZP,{item:!0,xs:12,sm:12,md:8,children:[(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"State:",value:null===f||void 0===f?void 0:f.currentState})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"MinIO:",value:(0,b.jsx)(S.Z,{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal",wordBreak:"break-all"},onClick:function(){J(!0)},children:f?f.image:""})})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Endpoint:",value:(0,b.jsx)("a",{href:null===f||void 0===f||null===(n=f.endpoints)||void 0===n?void 0:n.minio,target:"_blank",rel:"noopener noreferrer",className:x.linkedSection,children:(null===f||void 0===f||null===(t=f.endpoints)||void 0===t?void 0:t.minio)||"-"})})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Console:",value:(0,b.jsx)("a",{href:null===f||void 0===f||null===(o=f.endpoints)||void 0===o?void 0:o.console,target:"_blank",rel:"noopener noreferrer",className:x.linkedSection,children:(null===f||void 0===f||null===(s=f.endpoints)||void 0===s?void 0:s.console)||"-"})})})]}),(0,b.jsxs)(m.ZP,{item:!0,xs:12,sm:12,md:4,children:[(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Instances:",value:A})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Clusters:",value:M,stkProps:{style:{marginRight:47}}})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Total Drives:",value:U,stkProps:{style:{marginRight:43}}})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Write Quorum:",value:null!==f&&void 0!==f&&null!==(r=f.status)&&void 0!==r&&r.write_quorum?null===f||void 0===f||null===(c=f.status)||void 0===c?void 0:c.write_quorum:0})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Drives Online:",value:null!==f&&void 0!==f&&null!==(d=f.status)&&void 0!==d&&d.drives_online?null===f||void 0===f||null===(u=f.status)||void 0===u?void 0:u.drives_online:0,stkProps:{style:{marginRight:8}}})}),(0,b.jsx)(m.ZP,{item:!0,xs:12,children:(0,b.jsx)(R.Z,{label:"Drives Offline:",value:null!==f&&void 0!==f&&null!==(v=f.status)&&void 0!==v&&v.drives_offline?null===f||void 0===f||null===(h=f.status)||void 0===h?void 0:h.drives_offline:0,stkProps:{style:{marginRight:7}}})})]})]}),(0,b.jsx)(D.Z,{children:"Features"}),(0,b.jsxs)(g.Z,{sx:(0,i.Z)({},_),children:[(0,b.jsx)(R.Z,(0,i.Z)({orientation:"row",label:"Logs:",value:F(p,"tenant-log")},L)),(0,b.jsx)(R.Z,(0,i.Z)({orientation:"row",label:"AD/LDAP:",value:F(P,"tenant-sts")},L)),(0,b.jsx)(R.Z,(0,i.Z)({orientation:"row",label:"Encryption:",value:F(k,"tenant-enc")},L))]}),(0,b.jsxs)(g.Z,{sx:(0,i.Z)({},_),children:[(0,b.jsx)(R.Z,(0,i.Z)({orientation:"row",label:"MinIO TLS:",value:F(y,"tenant-tls")},L)),(0,b.jsx)(R.Z,(0,i.Z)({orientation:"row",label:"Monitoring:",value:F(j,"tenant-monitor")},L)),(0,b.jsx)(R.Z,(0,i.Z)({orientation:"row",label:"OpenID:",value:F(E,"tenant-oidc")},L))]})]})})))},22512:function(e,n,t){var a=t(72791),i=t(20890),l=t(11135),o=t(25787),s=t(80184);n.Z=(0,o.Z)((function(e){var n;return(0,l.Z)({errorBlock:{color:(null===(n=e.palette)||void 0===n?void 0:n.error.main)||"#C83B51"}})}))((function(e){var n=e.classes,t=e.errorMessage,l=e.withBreak,o=void 0===l||l;return(0,s.jsxs)(a.Fragment,{children:[o&&(0,s.jsx)("br",{}),(0,s.jsx)(i.Z,{component:"p",variant:"body1",className:n.errorBlock,children:t})]})}))},53767:function(e,n,t){var a=t(4942),i=t(63366),l=t(87462),o=t(72791),s=t(51184),r=t(45682),c=t(78519),d=t(82466),u=t(47630),m=t(93736),g=t(80184),v=["component","direction","spacing","divider","children"];function h(e,n){var t=o.Children.toArray(e).filter(Boolean);return t.reduce((function(e,a,i){return e.push(a),i<t.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(i)})),e}),[])}var x=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,t=e.theme,i=(0,l.Z)({display:"flex"},(0,s.k9)({theme:t},(0,s.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,r.hB)(t),c=Object.keys(t.breakpoints.values).reduce((function(e,t){return null==n.spacing[t]&&null==n.direction[t]||(e[t]=!0),e}),{}),u=(0,s.P$)({values:n.direction,base:c}),m=(0,s.P$)({values:n.spacing,base:c});i=(0,d.Z)(i,(0,s.k9)({theme:t},m,(function(e,t){return{"& > :not(style) + :not(style)":(0,a.Z)({margin:0},"margin".concat((i=t?u[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i])),(0,r.NA)(o,e))};var i})))}return i})),Z=o.forwardRef((function(e,n){var t=(0,m.Z)({props:e,name:"MuiStack"}),a=(0,c.Z)(t),o=a.component,s=void 0===o?"div":o,r=a.direction,d=void 0===r?"column":r,u=a.spacing,Z=void 0===u?0:u,f=a.divider,p=a.children,b=(0,i.Z)(a,v),j={direction:d,spacing:Z};return(0,g.jsx)(x,(0,l.Z)({as:s,ownerState:j,ref:n},b,{children:f?h(p,f):p}))}));n.Z=Z}}]);
//# sourceMappingURL=2794.ee6b7b2c.chunk.js.map