"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2684],{54639:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(29439),a=n(1413),r=n(72791),c=n(26181),o=n.n(c),s=n(61889),l=n(30829),d=n(20068),m=n(13400),u=n(99663),x=n(86711),f=n(11135),p=n(25787),h=n(23814),Z=n(84570),j=n(22512),g=n(80184),v=(0,p.Z)((function(e){return(0,f.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},h.YI),h.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},h.bV),{},{inputLabel:(0,a.Z)((0,a.Z)({},h.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,a.Z)((0,a.Z)({},h.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var t=e.label,n=e.classes,a=e.onChange,c=e.id,f=e.name,p=e.disabled,h=void 0!==p&&p,v=e.tooltip,C=void 0===v?"":v,b=e.required,y=e.error,k=void 0===y?"":y,I=e.accept,S=void 0===I?"":I,w=e.value,A=void 0===w?"":w,P=(0,r.useState)(!1),N=(0,i.Z)(P,2),T=N[0],B=N[1];return(0,g.jsx)(r.Fragment,{children:(0,g.jsxs)(s.ZP,{item:!0,xs:12,className:"".concat(n.fileInputField," ").concat(n.fieldBottom," ").concat(n.fieldContainer," ").concat(""!==k?n.errorInField:""),children:[""!==t&&(0,g.jsxs)(l.Z,{htmlFor:c,className:"".concat(""!==k?n.fieldLabelError:""," ").concat(n.inputLabel),children:[(0,g.jsxs)("span",{children:[t,b?"*":""]}),""!==C&&(0,g.jsx)("div",{className:n.tooltipContainer,children:(0,g.jsx)(d.Z,{title:C,placement:"top-start",children:(0,g.jsx)("div",{className:n.tooltip,children:(0,g.jsx)(Z.Z,{})})})})]}),T||""===A?(0,g.jsxs)("div",{className:n.textBoxContainer,children:[(0,g.jsx)("input",{type:"file",name:f,onChange:function(e){var t=o()(e,"target.files[0].name","");!function(e,t){var n=e.target.files[0],i=new FileReader;i.readAsDataURL(n),i.onload=function(){var e=i.result;if(e){var n=e.toString().split("base64,");2===n.length&&t(n[1])}}}(e,(function(e){a(e,t)}))},accept:S,required:b,disabled:h,className:n.fileInputField}),""!==A&&(0,g.jsx)(m.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){B(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,g.jsx)(x.Z,{})}),""!==k&&(0,g.jsx)(j.Z,{errorMessage:k})]}):(0,g.jsxs)("div",{className:n.fileReselect,children:[(0,g.jsx)("div",{className:n.valueString,children:A}),(0,g.jsx)(m.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){B(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,g.jsx)(u.Z,{})})]})]})})}))},98952:function(e,t,n){n.d(t,{Z:function(){return b}});n(72791);var i=n(11135),a=n(25787),r=n(90983),c=n(81918),o=n(26445),s=n(61889),l=n(20890),d=n(64554),m=n(94721),u=n(90493),x=n(15021),f=n(20653),p=n(49900),h=n(52502),Z=n(46431),j=n.n(Z),g=n(1413),v=n(80184),C=function(e){return(0,v.jsxs)("svg",(0,g.Z)((0,g.Z)({xmlns:"http://www.w3.org/2000/svg",className:"min-icon",fill:"currentcolor",viewBox:"0 0 256 256"},e),{},{children:[(0,v.jsx)("defs",{children:(0,v.jsx)("clipPath",{id:"certificate_svg__a",children:(0,v.jsx)("path",{"data-name":"Rect\\xE1ngulo 2156",fill:"#07193e",d:"M0 0h256v222.048H0z"})})}),(0,v.jsxs)("g",{"data-name":"Grupo 4763",transform:"translate(0 17)",clipPath:"url(#certificate_svg__a)",fill:"#07193e",children:[(0,v.jsx)("path",{"data-name":"Trazado 8152",d:"M240-.002H16a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h120l4.64-5.6 7.44-9.12A66.72 66.72 0 0 1 256 98.958v-82.96a16 16 0 0 0-16-16m-130.96 149.7H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 1 1 0 14.592m0-56H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 0 1 0 14.592m66.96-39.3a6.419 6.419 0 0 1-6.4 6.4H46.4a6.419 6.419 0 0 1-6.4-6.4v-1.792a6.419 6.419 0 0 1 6.4-6.4h123.2a6.419 6.419 0 0 1 6.4 6.4Z"}),(0,v.jsx)("path",{"data-name":"Trazado 8153",d:"M256 137.486a50.96 50.96 0 1 0-86.16 36.72l-15.52 18.96 7.2 28.88 29.28-35.68a50.018 50.018 0 0 0 28.4 0l29.28 35.68 7.2-28.88-15.52-18.96a50.75 50.75 0 0 0 15.84-36.72m-50.928 29.688a29.688 29.688 0 0 1-.072-59.376h.072a29.688 29.688 0 0 1 0 59.376"})]}),(0,v.jsx)("path",{"data-name":"Rect\\xE1ngulo 2157",fill:"none",d:"M0 0h256v256H0z"})]}))},b=(0,a.Z)((function(e){return(0,i.Z)({root:{padding:0,margin:0,border:0,backgroundColor:"transparent",textDecoration:"underline",cursor:"pointer",fontSize:"inherit",color:e.palette.info.main,fontFamily:"Lato, sans-serif"},certificateIcon:{float:"left",paddingTop:"5px !important",paddingRight:"10px !important"},certificateInfo:{float:"right"},certificateWrapper:{height:"auto",margin:5,border:"1px solid #E2E2E2",userSelect:"text",borderRadius:4,"& h6":{fontWeight:"bold"},"& div":{padding:0}},certificateExpiry:{color:"#616161",display:"flex",alignItems:"center",flexWrap:"wrap",marginBottom:5,"& .label":{fontWeight:"bold"}},certificateDomains:{color:"#616161","& .label":{fontWeight:"bold"}},certificatesList:{border:"1px solid #E2E2E2",borderRadius:4,color:"#616161",textTransform:"lowercase",overflowY:"scroll",maxHeight:145,marginBottom:10},certificatesListItem:{padding:"0px 16px",borderBottom:"1px solid #E2E2E2","& div":{minWidth:0},"& svg":{fontSize:12,marginRight:10,opacity:.5},"& span":{fontSize:12}}})}))((function(e){var t=e.classes,n=e.certificateInfo,i=e.onDelete,a=void 0===i?function(){}:i,Z=n.domains||[];return(0,v.jsx)(c.Z,{variant:"outlined",color:"primary",className:t.certificateWrapper,label:(0,v.jsxs)(o.Z,{children:[(0,v.jsx)(s.ZP,{item:!0,xs:1,className:t.certificateIcon,children:(0,v.jsx)(C,{})}),(0,v.jsxs)(s.ZP,{item:!0,xs:11,className:t.certificateInfo,children:[(0,v.jsx)(l.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:n.name}),(0,v.jsxs)(d.Z,{className:t.certificateExpiry,children:[(0,v.jsx)(h.Z,{color:"inherit",fontSize:"small"}),"\xa0",(0,v.jsx)("span",{className:"label",children:"Expiry:\xa0"}),(0,v.jsx)("span",{children:(0,v.jsx)(j(),{format:"YYYY/MM/DD",children:n.expiry})})]}),(0,v.jsx)(m.Z,{}),(0,v.jsx)("br",{}),(0,v.jsx)(d.Z,{className:t.certificateDomains,children:(0,v.jsx)("span",{className:"label",children:"".concat(Z.length," Domain (s):")})}),(0,v.jsx)(u.Z,{className:t.certificatesList,children:Z.map((function(e){return(0,v.jsxs)(x.ZP,{className:t.certificatesListItem,children:[(0,v.jsx)(f.Z,{children:(0,v.jsx)(r.Z,{})}),(0,v.jsx)(p.Z,{primary:e})]})}))})]})]}),onDelete:a},n.name)}))},12684:function(e,t,n){n.r(t);var i=n(4942),a=n(93433),r=n(29439),c=n(1413),o=n(11135),s=n(25787),l=n(23814),d=n(61889),m=n(72791),u=n(37516),x=n(51691),f=n(36151),p=n(54639),h=n(81207),Z=n(42649),j=n(60364),g=n(2148),v=n(93656),C=n(72401),b=n(98952),y=n(50896),k=n(80184),I={setErrorSnackMessage:Z.Ih},S=(0,j.$j)((function(e){return{loadingTenant:e.tenants.tenantDetails.loadingTenant,selectedTenant:e.tenants.tenantDetails.currentTenant,tenant:e.tenants.tenantDetails.tenantInfo}}),I);t.default=(0,s.Z)((function(e){return(0,o.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},l.oZ),l.bK),{},{loaderAlign:{textAlign:"center"},title:{marginTop:35},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},paperContainer:{padding:"15px 15px 15px 50px"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}},caCertsRow:{borderBottom:"1px solid #eaeaea",display:"flex",alignItems:"center",marginBottom:10}},(0,l.Bz)(e.spacing(4))),l.QV),l.DF),l.oO),l.AK))}))(S((function(e){var t=e.classes,n=e.tenant,o=e.loadingTenant,s=e.setErrorSnackMessage,l=(0,m.useState)(!1),Z=(0,r.Z)(l,2),j=Z[0],I=Z[1],S=(0,m.useState)(!1),w=(0,r.Z)(S,2),A=w[0],P=w[1],N=(0,m.useState)(!1),T=(0,r.Z)(N,2),B=T[0],D=T[1],E=(0,m.useState)(!1),R=(0,r.Z)(E,2),_=R[0],F=R[1],L=(0,m.useState)([]),M=(0,r.Z)(L,2),W=M[0],z=M[1],O=(0,m.useState)([]),H=(0,r.Z)(O,2),Y=H[0],K=H[1],q=(0,m.useState)([]),G=(0,r.Z)(q,2),V=G[0],Q=G[1],U=(0,m.useState)([]),$=(0,r.Z)(U,2),J=$[0],X=$[1],ee=(0,m.useState)([]),te=(0,r.Z)(ee,2),ne=te[0],ie=te[1],ae=(0,m.useCallback)((function(){h.Z.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security")).then((function(e){D(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&F(!0),X(e.customCertificates.minio||[]),ie(e.customCertificates.minioCAs||[])})).catch((function(e){s(e)}))}),[n,s]);(0,m.useEffect)((function(){n&&ae()}),[n,ae]);var re=function(e){z([].concat((0,a.Z)(W),[e.name]));var t=J.filter((function(t){return t.name!==e.name})),n=ne.filter((function(t){return t.name!==e.name}));X(t),ie(n)},ce=function(e,t,n,a,r){var o=Y,s=function(){};switch(e){case"minio":o=Y,s=K;break;case"minioCAs":o=V,s=Q}s(o.map((function(e){var o;return e.id===t?(0,c.Z)((0,c.Z)({},e),{},(o={},(0,i.Z)(o,n,a),(0,i.Z)(o,"encoded_".concat(n),r),o)):e})))},oe=function(e,t){var n=Y,i=function(){};switch(e){case"minio":n=Y,i=K;break;case"minioCAs":n=V,i=Q}n.length>1&&i(n.filter((function(e){return e.id!==t})))},se=function(e){var t=Y,n=function(){};switch(e){case"minio":t=Y,n=K;break;case"minioCAs":t=V,n=Q}n([].concat((0,a.Z)(t),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return(0,k.jsxs)(m.Fragment,{children:[(0,k.jsx)(g.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,k.jsx)(v.Ej,{}),isLoading:j,onClose:function(){return P(!1)},isOpen:A,onConfirm:function(){I(!0);var e={autoCert:B,customCertificates:{}};e.customCertificates=_?{secretsToBeDeleted:W,minio:Y.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:V.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat((0,a.Z)(J.map((function(e){return e.name}))),(0,a.Z)(ne.map((function(e){return e.name})))),minio:[],minioCAs:[]},h.Z.invoke("POST","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/security"),e).then((function(){I(!1),P(!1),K([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),Q([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),ae()})).catch((function(e){s(e),I(!1)}))},confirmationContent:(0,k.jsx)(x.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),o?(0,k.jsx)("div",{className:t.loaderAlign,children:(0,k.jsx)(C.Z,{})}):(0,k.jsxs)(d.ZP,{container:!0,spacing:1,children:[(0,k.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,k.jsx)("h1",{className:t.sectionTitle,children:"Security"}),(0,k.jsx)("hr",{className:t.hrClass})]}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(u.Z,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:B,onChange:function(e){var t=e.target.checked;D(t)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(u.Z,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:_,onChange:function(e){var t=e.target.checked;F(t)},label:"Custom Certificates",description:"Certificates used to terminated TLS at MinIO"})}),_&&(0,k.jsxs)(m.Fragment,{children:[(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(y.Z,{children:"MinIO Certificates"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:J.map((function(e){return(0,k.jsx)(b.Z,{certificateInfo:e,onDelete:function(){return re(e)}})}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:Y.map((function(e){return(0,k.jsxs)(d.ZP,{container:!0,alignItems:"center",style:{borderBottom:"1px solid #eaeaea"},children:[(0,k.jsx)(d.ZP,{item:!0,xs:5,children:(0,k.jsx)(p.Z,{onChange:function(t,n){return ce("minio",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,k.jsx)(d.ZP,{item:!0,xs:5,children:(0,k.jsx)(p.Z,{onChange:function(t,n){return ce("minio",e.id,"key",n,t)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})}),(0,k.jsx)(d.ZP,{item:!0,xs:2,children:(0,k.jsx)(f.Z,{variant:"outlined",color:"secondary",onClick:function(){return oe("minio",e.id)},children:"Remove"})})]},e.id)}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(f.Z,{variant:"outlined",color:"primary",endIcon:(0,k.jsx)(v.dt,{}),onClick:function(){return se("minio")},children:"Add Certificate"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(y.Z,{children:"MinIO CA Certificates"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:ne.map((function(e){return(0,k.jsx)(b.Z,{certificateInfo:e,onDelete:function(){return re(e)}})}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:V.map((function(e){return(0,k.jsxs)(d.ZP,{container:!0,style:{borderBottom:"1px solid #eaeaea"},alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(d.ZP,{item:!0,xs:5,className:t.fileItem,children:(0,k.jsx)(p.Z,{onChange:function(t,n){return ce("minioCAs",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,k.jsx)(d.ZP,{item:!0,xs:2,children:(0,k.jsx)(f.Z,{variant:"outlined",color:"secondary",onClick:function(){return oe("minioCAs",e.id)},children:"Remove"})})]},e.id)}))}),(0,k.jsx)(d.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(f.Z,{variant:"outlined",color:"primary",endIcon:(0,k.jsx)(v.dt,{}),onClick:function(){return se("minioCAs")},children:"Add CA Certificate"})})]}),(0,k.jsx)(d.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(f.Z,{type:"submit",variant:"contained",color:"primary",disabled:A||j,onClick:function(){return P(!0)},children:"Save"})})]})]})})))},22512:function(e,t,n){var i=n(72791),a=n(20890),r=n(11135),c=n(25787),o=n(80184);t.Z=(0,c.Z)((function(e){var t;return(0,r.Z)({errorBlock:{color:(null===(t=e.palette)||void 0===t?void 0:t.error.main)||"#C83B51"}})}))((function(e){var t=e.classes,n=e.errorMessage,r=e.withBreak,c=void 0===r||r;return(0,o.jsxs)(i.Fragment,{children:[c&&(0,o.jsx)("br",{}),(0,o.jsx)(a.Z,{component:"p",variant:"body1",className:t.errorBlock,children:n})]})}))}}]);
//# sourceMappingURL=2684.013ba254.chunk.js.map